操作系统底层需要用到的方法到此差不多完成了，想要使用地址空间抽象，还需要：
- 创建内核页表，使能分页机制，建立内核的虚拟地址空间
- 扩展`trap`上下文，保存与恢复`trap`上下文过程中切换页表
- 建立用于内核地址空间与用户地址空间相互切换的跳板空间
- 扩展任务控制块，包括虚拟内存相关信息，在加载执行创建基于某应用的任务时，建立应用的虚拟地址空间
- 改进`trap`处理过程和`sys_write`等系统调用的实现，支持分离的应用地址空间和内核地址空间

这一块修改的时候非常麻烦，代码基本改好以后遇到了地址问题，靠调试输出一步一步确认错误位置

## 总结

```text
                         mm 模块整体架构
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────┐        │
│  │   address   │────▶│page_table   │────▶│memory_set   │        │
│  │             │     │             │     │             │        │
│  │ PhysAddr    │     │ PageTable   │     │ MemorySet   │        │
│  │ VirtAddr    │     │ PTE/Flags   │     │ MapArea     │        │
│  │ PhysPageNum │     │             │     │ KERNEL_SPACE│        │
│  │ VirtPageNum │     │             │     │             │        │
│  └─────────────┘     └─────────────┘     └─────────────┘        │
│         │                    │                   │              │
│         │                    │                   │              │
│         │             ┌─────────────┐            │              │
│         └────────────▶│frame_alloc  │──────────--┘              │
│                       │             │                           │
│                       │FrameTracker │                           │
│                       │frame_alloc()│                           │
│                       │frame_dealloc│                           │
│                       └─────────────┘                           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```