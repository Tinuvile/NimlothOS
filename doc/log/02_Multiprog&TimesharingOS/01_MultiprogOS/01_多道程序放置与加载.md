这里实现的功能是可以把多个应用放置到内存中的MultiprogOS。

![MultiprogOS](../../image/OS/MultiprogOS.png)

多道程序放置时，需要调整`linker-qemu.ld`中的起始地址`BASE_ADDRESS`，这里并不直接使用`cargo build`构建应用的链接脚本，而是通过`build.py`为每个应用定制各自的链接脚本。它会先找到`BASE_ADDRESS`并替换成当前应用对应的地址，然后`cargo build`构建应用，再将`linker`还原。

在上一章的BatchOS，所有应用都只共享一个固定的加载物理地址，因此内存中最多只能驻留一个应用，然后由`batch`加载新的来替换。本章中，所有的应用在内核初始化时就一并被加载到内存中，通过调用`load`来加载到不同的物理地址。实际的内存布局是，从`APP_BASE_ADDRESS`开始依次为每个应用预留一段空间。

然后执行